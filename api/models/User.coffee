###*
# User
# @description :: Model for storing users
###

module.exports =
  schema: true
  attributes:
    # username:
    #   type: 'string'
    #   required: true
    #   unique: true
    #   alphanumericdashed: true
    password: type: 'string'
    email:
      type: 'email'
      required: true
      unique: true
    firstName:
      type: 'string'
      defaultsTo: ''
    lastName:
      type: 'string'
      defaultsTo: ''
    
    toJSON: ->
      obj = @toObject()
      delete obj.password
      delete obj.socialProfiles
      obj
  beforeUpdate: (values, next) ->
    CipherService.hashPassword values
    next()
    return
  beforeCreate: (values, next) ->
    CipherService.hashPassword values
    next()
    return

#eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJ1c2VyIjp7InVzZXJuYW1lIjoidGVzdGR1ZGUiLCJlbWFpbCI6InRlc3QxQHRlc3QuY29tIiwiZmlyc3ROYW1lIjoiIiwibGFzdE5hbWUiOiIiLCJwaG90byI6IiIsImNyZWF0ZWRBdCI6IjIwMTUtMTEtMTFUMDQ6MzU6MDUuODMyWiIsInVwZGF0ZWRBdCI6IjIwMTUtMTEtMTFUMDQ6MzU6MDUuODMyWiIsImlkIjoxfSwiaWF0IjoxNDQ3MjE2NTA1LCJleHAiOjE0NDczMDI5MDUsImF1ZCI6Im5venVzLmNvbSIsImlzcyI6Im5venVzLmNvbSJ9.gZOepfjTA3YqRo9-HcKl-j3xu3f1IpXutluyajRfPnQ

# ---
# generated by js2coffee 2.1.0