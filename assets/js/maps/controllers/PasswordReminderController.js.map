{"version":3,"sources":["controllers/PasswordReminderController.coffee"],"names":[],"mappings":"AAAA;AAEA,OAAO,CAAC,MAAR,CAAe,SAAf,CAAyB,CAAC,UAA1B,CAAqC,4BAArC,EAAmE;EACjE,QADiE,EAEjE,QAFiE,EAGjE,OAHiE,EAIjE,SAJiE,EAKjE,MALiE,EAMjE,WANiE,EAOjE,WAPiE,EAQjE,UARiE,EASjE,SAAE,MAAF,EAAU,MAAV,EAAkB,KAAlB,EAAyB,OAAzB,EAAkC,IAAlC,EAAwC,SAAxC,EAAmD,SAAnD,EAA8D,QAA9D;AACE,QAAA;IAAA,OAAO,CAAC,GAAR,CAAY,6BAAZ;IACA,UAAA,GAAa,MAAM,CAAC,YAAY,CAAC,OAApB,CAA4B,YAA5B;IACb,qBAAA,GAAwB,SAAS,CAAC,MAAV,CAAA,CAAkB,CAAC;WAmD3C,MAAM,CAAC,eAAP,GAAyB,SAAA;MACvB,OAAO,CAAC,GAAR,CAAY,MAAM,CAAC,oBAAnB;aACA,KAAA,CACE;QAAA,MAAA,EAAQ,MAAR;QACA,GAAA,EAAS,SAAS,CAAC,MAAZ,GAAoB,cAD3B;QAEA,OAAA,EAAS;UAAE,eAAA,EAAiB,MAAA,GAAQ,UAA3B;UAA0C,cAAA,EAAgB,kBAA1D;SAFT;QAGA,IAAA,EAEE;UAAA,UAAA,EAAY,MAAM,CAAC,oBAAoB,CAAC,KAAxC;SALF;OADF,CAQC,CAAC,IARF,CAQO,CAAE,SAAE,QAAF;QACP,OAAO,CAAC,GAAR,CAAY,6BAAZ;QACA,OAAO,CAAC,GAAR,CAAY,QAAZ;eACA,QAAQ,CAAC,OAAT,CAAiB,2BAAjB;MAHO,CAAF,CARP,EAYG,SAAE,WAAF;QACD,OAAO,CAAC,GAAR,CAAY,8BAAZ;QACA,OAAO,CAAC,GAAR,CAAY,WAAZ;QACA,QAAQ,CAAC,KAAT,CAAe,WAAW,CAAC,OAA3B;eACA,MAAM,CAAC,EAAP,CAAU,mBAAV;MAJC,CAZH;IAFuB;EAtD3B,CATiE;CAAnE","file":"controllers/PasswordReminderController.js","sourceRoot":"/source/","sourcesContent":["'use strict'\r\n\r\nangular.module('subzapp').controller('PasswordReminderController', [\r\n  '$scope'\r\n  '$state'\r\n  '$http'\r\n  '$window'\r\n  'user'\r\n  '$location'\r\n  'RESOURCES'\r\n  'alertify'\r\n  ( $scope, $state, $http, $window, user, $location, RESOURCES, alertify ) ->\r\n    console.log 'PasswordReminder Controller'\r\n    user_token = window.localStorage.getItem 'user_token'\r\n    remind_password_token = $location.search().remind_password_token\r\n\r\n   # $http(\r\n   #    method: 'GET'\r\n   #    url: \"#{ RESOURCES.DOMAIN }/get_reset\"\r\n   #    params:\r\n   #      remind_password_token: $location.search().remind_password_token\r\n   #  ).then ( ( response ) ->\r\n   #    console.log \"Get Reset response\"\r\n   #    console.log response.data\r\n   #    # $scope.register_manager_form_data = response.data\r\n   #    # $scope.register_manager_form_data.invited_email = response.data.invited_email\r\n   #    $scope.post_reset_form_data = response.data\r\n   #    $scope.post_reset_form_data.email = response.data.email\r\n   #    $scope.post_reset_form.remind_password_token = response.data.remind_password_token\r\n\r\n   #  ), ( errResponse ) ->\r\n   #    console.log \"Get Reset error\"\r\n   #    console.log errResponse\r\n\r\n\r\n    # $scope.post_reset = ->\r\n    #   console.log JSON.stringify $scope.post_reset_form_data\r\n      \r\n    #   console.log $scope.post_reset_form_data\r\n\r\n    #   if ($scope.post_reset_form_data.password == $scope.post_reset_form_data.password_confirm )\r\n    #     validated_password = $scope.post_reset_form_data.password\r\n\r\n    #   $http(\r\n    #     method: 'POST'\r\n    #     url: \"#{ RESOURCES.DOMAIN }/post_reset\"\r\n    #     data: \r\n\r\n    #       password: validated_password\r\n          \r\n    #   ).then ( (response) ->      \r\n    #     console.log \"Password Reset successfull \"\r\n    #     console.log response\r\n    #     #window.localStorage.setItem 'user_token', response.data.data.token\r\n    #     # console.log \"user_token \" + window.localStorage.getItem 'user_token'\r\n    #     #window.localStorage.setItem 'user_id', response.data.data.user.id\r\n    #     $state.go 'login'\r\n    #   ), ( errResponse ) ->\r\n    #     console.log \"Password Reset failed \"\r\n    #     setTimeout ( ->\r\n    #       $state.go 'login' \r\n    #     ), 5000\r\n    #     console.log errResponse\r\n   \r\n\r\n    $scope.password_remind = ->\r\n      console.log $scope.password_remind_data\r\n      $http(\r\n        method: 'POST'\r\n        url: \"#{ RESOURCES.DOMAIN }/post_remind\"\r\n        headers: { 'Authorization': \"JWT #{ user_token }\", \"Content-Type\": \"application/json\" }\r\n        data:\r\n         \r\n          user_email: $scope.password_remind_data.email\r\n          \r\n      ).then ( ( response ) ->\r\n        console.log \"Send password reminder mail\"\r\n        console.log response\r\n        alertify.success \"Password Reminder sent ok\"\r\n      ), ( errResponse ) ->\r\n        console.log \"Send Password Reminder email\"\r\n        console.log errResponse\r\n        alertify.error errResponse.message\r\n        $state.go 'password-reminder' \r\n])\r\n\r\n"]}