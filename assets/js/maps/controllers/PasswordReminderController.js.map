{"version":3,"sources":["controllers/PasswordReminderController.coffee"],"names":[],"mappings":"AAAA;AAEA,OAAO,CAAC,MAAR,CAAe,SAAf,CAAyB,CAAC,UAA1B,CAAqC,4BAArC,EAAmE;EACjE,QADiE,EAEjE,QAFiE,EAGjE,OAHiE,EAIjE,SAJiE,EAKjE,MALiE,EAMjE,WANiE,EAOjE,WAPiE,EAQjE,UARiE,EASjE,SAAE,MAAF,EAAU,MAAV,EAAkB,KAAlB,EAAyB,OAAzB,EAAkC,IAAlC,EAAwC,SAAxC,EAAmD,SAAnD,EAA8D,QAA9D;AACE,QAAA;IAAA,OAAO,CAAC,GAAR,CAAY,6BAAZ;IACA,UAAA,GAAa,MAAM,CAAC,YAAY,CAAC,OAApB,CAA4B,YAA5B;IACb,qBAAA,GAAwB,SAAS,CAAC,MAAV,CAAA,CAAkB,CAAC;WAmD3C,MAAM,CAAC,eAAP,GAAyB,SAAA;MACvB,OAAO,CAAC,GAAR,CAAY,MAAM,CAAC,oBAAnB;aACA,KAAA,CACE;QAAA,MAAA,EAAQ,MAAR;QACA,GAAA,EAAS,SAAS,CAAC,MAAZ,GAAoB,cAD3B;QAEA,OAAA,EAAS;UAAE,eAAA,EAAiB,MAAA,GAAQ,UAA3B;UAA0C,cAAA,EAAgB,kBAA1D;SAFT;QAGA,IAAA,EAEE;UAAA,UAAA,EAAY,MAAM,CAAC,oBAAoB,CAAC,KAAxC;SALF;OADF,CAQC,CAAC,IARF,CAQO,CAAE,SAAE,QAAF;QACP,OAAO,CAAC,GAAR,CAAY,6BAAZ;QACA,OAAO,CAAC,GAAR,CAAY,QAAZ;eACA,QAAQ,CAAC,OAAT,CAAiB,2BAAjB;MAHO,CAAF,CARP,EAYG,SAAE,WAAF;QACD,OAAO,CAAC,GAAR,CAAY,8BAAZ;QACA,OAAO,CAAC,GAAR,CAAY,WAAZ;QACA,QAAQ,CAAC,KAAT,CAAe,WAAW,CAAC,OAA3B;eACA,MAAM,CAAC,EAAP,CAAU,mBAAV;MAJC,CAZH;IAFuB;EAtD3B,CATiE;CAAnE","file":"controllers/PasswordReminderController.js","sourceRoot":"/source/","sourcesContent":["'use strict'\n\nangular.module('subzapp').controller('PasswordReminderController', [\n  '$scope'\n  '$state'\n  '$http'\n  '$window'\n  'user'\n  '$location'\n  'RESOURCES'\n  'alertify'\n  ( $scope, $state, $http, $window, user, $location, RESOURCES, alertify ) ->\n    console.log 'PasswordReminder Controller'\n    user_token = window.localStorage.getItem 'user_token'\n    remind_password_token = $location.search().remind_password_token\n\n   # $http(\n   #    method: 'GET'\n   #    url: \"#{ RESOURCES.DOMAIN }/get_reset\"\n   #    params:\n   #      remind_password_token: $location.search().remind_password_token\n   #  ).then ( ( response ) ->\n   #    console.log \"Get Reset response\"\n   #    console.log response.data\n   #    # $scope.register_manager_form_data = response.data\n   #    # $scope.register_manager_form_data.invited_email = response.data.invited_email\n   #    $scope.post_reset_form_data = response.data\n   #    $scope.post_reset_form_data.email = response.data.email\n   #    $scope.post_reset_form.remind_password_token = response.data.remind_password_token\n\n   #  ), ( errResponse ) ->\n   #    console.log \"Get Reset error\"\n   #    console.log errResponse\n\n\n    # $scope.post_reset = ->\n    #   console.log JSON.stringify $scope.post_reset_form_data\n      \n    #   console.log $scope.post_reset_form_data\n\n    #   if ($scope.post_reset_form_data.password == $scope.post_reset_form_data.password_confirm )\n    #     validated_password = $scope.post_reset_form_data.password\n\n    #   $http(\n    #     method: 'POST'\n    #     url: \"#{ RESOURCES.DOMAIN }/post_reset\"\n    #     data: \n\n    #       password: validated_password\n          \n    #   ).then ( (response) ->      \n    #     console.log \"Password Reset successfull \"\n    #     console.log response\n    #     #window.localStorage.setItem 'user_token', response.data.data.token\n    #     # console.log \"user_token \" + window.localStorage.getItem 'user_token'\n    #     #window.localStorage.setItem 'user_id', response.data.data.user.id\n    #     $state.go 'login'\n    #   ), ( errResponse ) ->\n    #     console.log \"Password Reset failed \"\n    #     setTimeout ( ->\n    #       $state.go 'login' \n    #     ), 5000\n    #     console.log errResponse\n   \n\n    $scope.password_remind = ->\n      console.log $scope.password_remind_data\n      $http(\n        method: 'POST'\n        url: \"#{ RESOURCES.DOMAIN }/post_remind\"\n        headers: { 'Authorization': \"JWT #{ user_token }\", \"Content-Type\": \"application/json\" }\n        data:\n         \n          user_email: $scope.password_remind_data.email\n          \n      ).then ( ( response ) ->\n        console.log \"Send password reminder mail\"\n        console.log response\n        alertify.success \"Password Reminder sent ok\"\n      ), ( errResponse ) ->\n        console.log \"Send Password Reminder email\"\n        console.log errResponse\n        alertify.error errResponse.message\n        $state.go 'password-reminder' \n])\n\n"]}