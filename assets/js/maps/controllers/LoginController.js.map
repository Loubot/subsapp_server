{"version":3,"sources":["controllers/LoginController.coffee"],"names":[],"mappings":"AAAA;AAEA,OAAO,CAAC,MAAR,CAAe,SAAf,CAAyB,CAAC,UAA1B,CAAqC,iBAArC,EAAwD;EACtD,QADsD,EAEtD,YAFsD,EAGtD,QAHsD,EAItD,OAJsD,EAKtD,SALsD,EAMtD,WANsD,EAOtD,UAPsD,EAStD,SAAE,MAAF,EAAU,UAAV,EAAsB,MAAtB,EAA8B,KAA9B,EAAqC,OAArC,EAA8C,SAA9C,EAAyD,QAAzD;IACE,OAAO,CAAC,GAAR,CAAY,kBAAZ;IAEA,MAAM,CAAC,YAAP,GAAsB,SAAA;aACpB,KAAK,CAAC,IAAN,CACE,cADF,EAEE,MAAM,CAAC,eAFT,CAGC,CAAC,IAHF,CAGO,CAAE,SAAC,QAAD;QACP,OAAO,CAAC,GAAR,CAAY,YAAA,GAAc,QAAQ,CAAC,IAAI,CAAC,IAAxC;QACA,OAAO,CAAC,GAAR,CAAY,QAAZ;QACA,UAAU,CAAC,IAAX,GAAkB,QAAQ,CAAC,IAAI,CAAC;QAChC,MAAM,CAAC,YAAY,CAAC,OAApB,CAA4B,YAA5B,EAA0C,QAAQ,CAAC,IAAI,CAAC,KAAxD;QACA,MAAM,CAAC,YAAY,CAAC,OAApB,CAA4B,SAA5B,EAAuC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,EAA1D;QAGA,IAAG,UAAU,CAAC,IAAI,CAAC,UAAnB;UACE,OAAO,CAAC,GAAR,CAAY,YAAZ;iBACA,MAAM,CAAC,EAAP,CAAU,WAAV,EAFF;SAAA,MAAA;UAIE,OAAO,CAAC,GAAR,CAAY,cAAZ;iBACA,MAAM,CAAC,EAAP,CAAU,mBAAV,EALF;;MARO,CAAF,CAHP,EAiBG,SAAE,WAAF;QACD,OAAO,CAAC,GAAR,CAAY,iBAAA,GAAiB,CAAE,IAAI,CAAC,SAAL,CAAe,WAAW,CAAC,IAA3B,CAAF,CAA7B;QACA,UAAU,CAAC,IAAX,GAAkB;eAClB,QAAQ,CAAC,KAAT,CAAgB,WAAW,CAAC,IAAI,CAAC,OAAjC;MAHC,CAjBH;IADoB;WA0CtB,MAAM,CAAC,WAAP,GAAqB;MACnB,KAAA,EAAQ,EADW;MAEnB,QAAA,EAAW,EAFQ;;EA7CvB,CATsD;CAAxD","file":"controllers/LoginController.js","sourceRoot":"/source/","sourcesContent":["'use strict'\n\nangular.module('subzapp').controller('LoginController', [\n  '$scope'\n  '$rootScope'\n  '$state'\n  'COMMS'\n  '$window'\n  'RESOURCES'\n  'alertify'\n  # 'AuthService'\n  ( $scope, $rootScope, $state, COMMS, $window, RESOURCES, alertify ) ->\n    console.log 'Login Controller'\n    \n    $scope.login_submit = ->\n      COMMS.POST(\n        \"/auth/signin\"        \n        $scope.login_form_data\n      ).then ( (response) ->\n        console.log \"Logged in #{ response.data.user }\"\n        console.log response\n        $rootScope.USER = response.data.user\n        window.localStorage.setItem 'user_token', response.data.token\n        window.localStorage.setItem 'user_id', response.data.user.id\n        # console.log \"Success response token #{ JSON.stringify response.data.token }\"\n        # $state.go 'org'\n        if $rootScope.USER.club_admin\n          console.log 'club_admin'\n          $state.go 'org_admin'\n        else\n          console.log 'team_manager'\n          $state.go 'team_manager_home'\n      ), ( errResponse ) ->\n        console.log \"Error response #{ JSON.stringify errResponse.data }\"\n        $rootScope.USER = null\n        alertify.error( errResponse.data.message )\n        # $scope.errorMessage = errResponse\n        \n\n\n\n      # $http.post(\"#{ RESOURCES.DOMAIN }/auth/signin\", $scope.login_form_data).success( (data) ->\n      #   console.log \"returned #{ JSON.stringify data }\"\n      #   window.localStorage.setItem 'logged_in_user', JSON.stringify data\n      #   $scope.login_form_data = {}\n      #   $scope.returned = data\n\n      #   $state.go 'user'\n\n      # ).fail( (error) ->\n      #   console.log \"new error\"\n      # ).error (err) ->\n      #   $('.login_error').show 'slide', { direction: 'right' }, 1000\n      #   $scope.errorMessage = err\n      #   console.log \"error!!!!!\" + JSON.stringify err\n\n    $scope.credentials = {\n      email : ''\n      password : ''\n    }\n\n    # $scope.login = ->\n    #   AuthService.login $scope.credentials, (response) ->\n    #     console.log response\n\n])\n"]}