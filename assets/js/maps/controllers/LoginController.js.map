{"version":3,"sources":["controllers/LoginController.coffee"],"names":[],"mappings":"AAAA;AAEA,OAAO,CAAC,MAAR,CAAe,SAAf,CAAyB,CAAC,UAA1B,CAAqC,iBAArC,EAAwD;EACtD,QADsD,EAEtD,QAFsD,EAGtD,OAHsD,EAItD,SAJsD,EAKtD,WALsD,EAMtD,UANsD,EAQtD,SAAE,MAAF,EAAU,MAAV,EAAkB,KAAlB,EAAyB,OAAzB,EAAkC,SAAlC,EAA6C,QAA7C;IACE,OAAO,CAAC,GAAR,CAAY,kBAAZ;IAEA,MAAM,CAAC,YAAP,GAAsB,SAAA;aACpB,KAAA,CACE;QAAA,MAAA,EAAQ,MAAR;QACA,GAAA,EAAS,SAAS,CAAC,MAAZ,GAAoB,cAD3B;QAEA,OAAA,EAAS;UACC,cAAA,EAAgB,kBADjB;SAFT;QAKA,IAAA,EAAM,MAAM,CAAC,eALb;OADF,CAOC,CAAC,IAPF,CAOO,CAAE,SAAC,QAAD;QACP,OAAO,CAAC,GAAR,CAAY,UAAA,GAAY,QAAQ,CAAC,IAAI,CAAC,IAAtC;QACA,OAAO,CAAC,GAAR,CAAY,QAAZ;QACA,MAAM,CAAC,IAAP,GAAc,QAAQ,CAAC,IAAI,CAAC;QAC5B,MAAM,CAAC,YAAY,CAAC,OAApB,CAA4B,YAA5B,EAA0C,QAAQ,CAAC,IAAI,CAAC,KAAxD;QACA,MAAM,CAAC,YAAY,CAAC,OAApB,CAA4B,SAA5B,EAAuC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,EAA1D;QAGA,IAAG,MAAM,CAAC,IAAI,CAAC,UAAf;UACE,OAAO,CAAC,GAAR,CAAY,YAAZ;iBACA,MAAM,CAAC,EAAP,CAAU,WAAV,EAFF;SAAA,MAAA;UAIE,OAAO,CAAC,GAAR,CAAY,cAAZ;iBACA,MAAM,CAAC,EAAP,CAAU,mBAAV,EALF;;MARO,CAAF,CAPP,EAqBG,SAAE,WAAF;QACD,OAAO,CAAC,GAAR,CAAY,iBAAA,GAAiB,CAAE,IAAI,CAAC,SAAL,CAAe,WAAW,CAAC,IAA3B,CAAF,CAA7B;QACA,MAAM,CAAC,IAAP,GAAc;eACd,QAAQ,CAAC,KAAT,CAAgB,WAAW,CAAC,IAAI,CAAC,OAAjC;MAHC,CArBH;IADoB;WA8CtB,MAAM,CAAC,WAAP,GAAqB;MACnB,KAAA,EAAQ,EADW;MAEnB,QAAA,EAAW,EAFQ;;EAjDvB,CARsD;CAAxD","file":"controllers/LoginController.js","sourceRoot":"/source/","sourcesContent":["'use strict'\n\nangular.module('subzapp').controller('LoginController', [\n  '$scope'\n  '$state'\n  '$http'\n  '$window'\n  'RESOURCES'\n  'alertify'\n  # 'AuthService'\n  ( $scope, $state, $http, $window, RESOURCES, alertify ) ->\n    console.log 'Login Controller'\n    \n    $scope.login_submit = ->\n      $http(\n        method: 'POST'\n        url: \"#{ RESOURCES.DOMAIN }/auth/signin\"\n        headers: {\n                  'Content-Type': 'application/json'\n                  }\n        data: $scope.login_form_data\n      ).then ( (response) ->\n        console.log \"User id #{ response.data.user }\"\n        console.log response\n        $scope.user = response.data.user\n        window.localStorage.setItem 'user_token', response.data.token\n        window.localStorage.setItem 'user_id', response.data.user.id\n        # console.log \"Success response token #{ JSON.stringify response.data.token }\"\n        # $state.go 'org'\n        if $scope.user.club_admin\n          console.log 'club_admin'\n          $state.go 'org_admin'\n        else\n          console.log 'team_manager'\n          $state.go 'team_manager_home'\n      ), ( errResponse ) ->\n        console.log \"Error response #{ JSON.stringify errResponse.data }\"\n        window.USER = null\n        alertify.error( errResponse.data.message )\n        # $scope.errorMessage = errResponse\n        \n\n\n\n      # $http.post(\"#{ RESOURCES.DOMAIN }/auth/signin\", $scope.login_form_data).success( (data) ->\n      #   console.log \"returned #{ JSON.stringify data }\"\n      #   window.localStorage.setItem 'logged_in_user', JSON.stringify data\n      #   $scope.login_form_data = {}\n      #   $scope.returned = data\n\n      #   $state.go 'user'\n\n      # ).fail( (error) ->\n      #   console.log \"new error\"\n      # ).error (err) ->\n      #   $('.login_error').show 'slide', { direction: 'right' }, 1000\n      #   $scope.errorMessage = err\n      #   console.log \"error!!!!!\" + JSON.stringify err\n\n    $scope.credentials = {\n      email : ''\n      password : ''\n    }\n\n    # $scope.login = ->\n    #   AuthService.login $scope.credentials, (response) ->\n    #     console.log response\n\n])\n"]}