{"version":3,"sources":["controllers/TeamEventsController.coffee"],"names":[],"mappings":"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","file":"controllers/TeamEventsController.js","sourceRoot":"/source/","sourcesContent":["'use strict'\r\n\r\nangular.module('subzapp').controller('TeamEventsController', [\r\n  '$scope'\r\n  '$rootScope'\r\n  '$state'\r\n  'COMMS'\r\n  'user'\r\n  'alertify'\r\n  'RESOURCES'\r\n  ( $scope, $rootScope, $state, COMMS, user, alertify, RESOURCES ) ->    \r\n    console.log 'Team Events Controller'\r\n\r\n    if !( window.localStorage.getItem 'team_id' )?\r\n      $state.go 'team_manager'\r\n\r\n    user.get_user().then ( (res) ->\r\n      $scope.user = $rootScope.USER\r\n      COMMS.GET(\r\n        \"/team/#{ window.localStorage.getItem 'team_id' }\"\r\n      ).then ( ( team ) ->\r\n        console.log \"Got team info\"\r\n        console.log team\r\n        $scope.team = team.data\r\n        alertify.success \"Got team info\"\r\n      ), ( team_err ) ->\r\n\r\n        console.log \"Team error\"\r\n        console.log team_err\r\n        alertify.error \"Failed to get team\"\r\n\r\n      COMMS.GET(\r\n        \"/team/#{ window.localStorage.getItem 'team_id' }/teams-events\"\r\n      ).then ( ( team ) ->\r\n        console.log \"Got events info\"\r\n        console.log team\r\n        $scope.events = team.data\r\n        alertify.success \"Got team info\"\r\n      ), ( team_err ) ->\r\n\r\n        console.log \"Team error\"\r\n        console.log team_err\r\n        alertify.error \"Failed to get team\"\r\n      \r\n    ), ( errResponse ) ->\r\n      $rootScope.USER = null\r\n      $state.go 'login'\r\n    \r\n\r\n      #moment(res.data[0].eligible_date).format('YYYY-MM-DD')\r\n\r\n    $scope.format_date = ( date ) ->\r\n      console.log date\r\n      return moment( date ).format( 'YYYY-MM-DD HH:mm' )\r\n\r\n    $scope.onTimeSet = ( nd, od ) ->\r\n      console.log nd\r\n      console.log od\r\n      console.log moment.duration( moment( od ).diff( moment( nd ) ) )\r\n      $scope.date.from = moment( nd ).format( 'DD-MM-YYYY HH:mm' )\r\n      $scope.date.to = moment( od ).format( 'DD-MM-YYYY HH:mm' )\r\n\r\n    ###################### calendar stuff ############################\r\n\r\n    $scope.dt = {}\r\n   \r\n\r\n    $scope.today = ->\r\n      $scope.dt.start_date = new Date()\r\n      date = new Date()\r\n      $scope.dt.end_date = date.setDate( date.getDate() + 1 )\r\n      console.log \"Date #{ $scope.dt.end_date }\"\r\n      return\r\n\r\n    $scope.today()\r\n\r\n    $scope.clear = ->\r\n      $scope.dt = null\r\n      return\r\n\r\n\r\n\r\n\r\n    $scope.open1 = ->\r\n      $scope.popup1.opened = true\r\n      return\r\n\r\n    $scope.open2 = ->\r\n      $scope.popup2.opened = true\r\n      return\r\n\r\n    $scope.setDate = (year, month, day) ->\r\n      $scope.dt = new Date(year, month, day)\r\n      return\r\n\r\n    \r\n    $scope.format = \"dd-MMMM-yyyy\"\r\n    $scope.popup1 = opened: false\r\n    $scope.popup2 = opened: false\r\n\r\n  ##################### end of calendar stuff ##########################\r\n\r\n    $scope.get_events = ->\r\n      console.log \"team #{ window.localStorage.getItem 'team_id' }\"\r\n      COMMS.GET(\r\n        \"/team/#{ window.localStorage.getItem 'team_id' }/teams-events\"\r\n        $scope.dt\r\n      ).then ( ( resp ) ->\r\n        console.log resp\r\n      ), ( errResponse ) ->\r\n        console.log errResponse\r\n])\r\n"]}