{"version":3,"sources":["controllers/EditUserController.coffee"],"names":[],"mappings":"AAAA;AAEA,OAAO,CAAC,MAAR,CAAe,SAAf,CAAyB,CAAC,UAA1B,CAAqC,oBAArC,EAA2D;EACzD,QADyD,EAEzD,QAFyD,EAGzD,OAHyD,EAIzD,SAJyD,EAKzD,MALyD,EAMzD,WANyD,EAOzD,UAPyD,EAQzD,SAAE,MAAF,EAAU,MAAV,EAAkB,KAAlB,EAAyB,OAAzB,EAAkC,IAAlC,EAAwC,SAAxC,EAAmD,QAAnD;AACE,QAAA;IAAA,OAAO,CAAC,GAAR,CAAY,iBAAZ;IAEA,UAAA,GAAa,MAAM,CAAC,YAAY,CAAC,OAApB,CAA4B,YAA5B;IACb,IAAG,CAAC,CAAC,mBAAD,CAAJ;MACE,IAAI,CAAC,QAAL,CAAA,CAAe,CAAC,IAAhB,CAAqB,CAAE,SAAC,GAAD;QAGrB,MAAM,CAAC,IAAP,GAAc,MAAM,CAAC,IAAI,CAAC;eAC1B,MAAM,CAAC,IAAP,GAAc;MAJO,CAAF,CAArB,EAKG,SAAE,WAAF;QACD,OAAO,CAAC,GAAR,CAAY,iBAAA,GAAiB,CAAE,IAAI,CAAC,SAAL,CAAe,WAAf,CAAF,CAA7B;QACA,MAAM,CAAC,IAAP,GAAc;eACd,MAAM,CAAC,EAAP,CAAU,OAAV;MAHC,CALH,EADF;KAAA,MAAA;MAWE,OAAO,CAAC,GAAR,CAAY,MAAZ;MACA,MAAM,CAAC,IAAP,GAAc,MAAM,CAAC,IAAI,CAAC;MAC1B,MAAM,CAAC,IAAP,GAAc,KAbhB;;WAgBA,MAAM,CAAC,SAAP,GAAmB,SAAA;aAGjB,KAAA,CACE;QAAA,MAAA,EAAQ,MAAR;QACA,GAAA,EAAS,SAAS,CAAC,MAAZ,GAAoB,YAD3B;QAEA,OAAA,EAAS;UACC,eAAA,EAAiB,MAAA,GAAQ,UAD1B;UACyC,cAAA,EAAgB,kBADzD;SAFT;QAKA,IAAA,EACE;UAAA,EAAA,EAAI,MAAM,CAAC,IAAI,CAAC,EAAhB;UACA,SAAA,EAAW,MAAM,CAAC,IAAI,CAAC,SADvB;UAEA,QAAA,EAAU,MAAM,CAAC,IAAI,CAAC,QAFtB;SANF;OADF,CAUC,CAAC,IAVF,CAUO,CAAE,SAAC,QAAD;QACP,OAAO,CAAC,GAAR,CAAY,qBAAA,GAAqB,CAAE,IAAI,CAAC,SAAL,CAAe,QAAf,CAAF,CAAjC;eACA,QAAQ,CAAC,OAAT,CAAiB,iBAAjB;MAFO,CAAF,CAVP,EAaG,SAAE,WAAF;QACD,OAAO,CAAC,GAAR,CAAY,kBAAA,GAAkB,CAAE,IAAI,CAAC,SAAL,CAAe,WAAf,CAAF,CAA9B;eACA,QAAQ,CAAC,KAAT,CAAe,kBAAf;MAFC,CAbH;IAHiB;EApBrB,CARyD;CAA3D","file":"controllers/EditUserController.js","sourceRoot":"/source/","sourcesContent":["'use strict'\r\n\r\nangular.module('subzapp').controller('EditUserController', [\r\n  '$scope'\r\n  '$state'\r\n  '$http'\r\n  '$window'\r\n  'user'\r\n  'RESOURCES'\r\n  'alertify'\r\n  ( $scope, $state, $http, $window, user, RESOURCES, alertify ) ->\r\n    console.log 'User Controller'\r\n  \r\n    user_token = window.localStorage.getItem 'user_token'\r\n    if !(window.USER?)\r\n      user.get_user().then ( (res) ->\r\n        # console.log \"Got user #{ JSON.stringify res }\"\r\n                \r\n        $scope.orgs = window.USER.orgs\r\n        $scope.user = USER\r\n      ), ( errResponse ) ->\r\n        console.log \"User get error #{ JSON.stringify errResponse }\"\r\n        window.USER = null\r\n        $state.go 'login'\r\n    else \r\n      console.log 'else'\r\n      $scope.orgs = window.USER.orgs\r\n      $scope.user = USER\r\n\r\n\r\n    $scope.edit_user = ->\r\n      # console.log $scope.user\r\n      # $scope.user.user_id = USER.id\r\n      $http(\r\n        method: 'POST'\r\n        url: \"#{ RESOURCES.DOMAIN }/edit-user\"\r\n        headers: { \r\n                  'Authorization': \"JWT #{ user_token }\", \"Content-Type\": \"application/json\"\r\n                  }\r\n        data: \r\n          id: $scope.user.id\r\n          firstName: $scope.user.firstName\r\n          lastName: $scope.user.lastName\r\n      ).then ( (response) ->\r\n        console.log \"Edit user response #{ JSON.stringify response }\"\r\n        alertify.success('User updated ok')\r\n      ), ( errResponse ) ->\r\n        console.log \"Edit user error #{ JSON.stringify errResponse }\"\r\n        alertify.error \"User not updated\"\r\n\r\n])\r\n"]}