{"version":3,"sources":["controllers/RegisterController.coffee"],"names":[],"mappings":"AAAA;AAEA,OAAO,CAAC,MAAR,CAAe,SAAf,CAAyB,CAAC,UAA1B,CAAqC,oBAArC,EAA2D;EACzD,QADyD,EAEzD,QAFyD,EAGzD,OAHyD,EAIzD,SAJyD,EAKzD,UALyD,EAMzD,WANyD,EAOzD,SAAE,MAAF,EAAU,MAAV,EAAkB,KAAlB,EAAyB,OAAzB,EAAkC,QAAlC,EAA4C,SAA5C;IACE,OAAO,CAAC,GAAR,CAAY,qBAAZ;WAEA,MAAM,CAAC,eAAP,GAAyB,SAAA;MACvB,MAAM,CAAC,kBAAkB,CAAC,UAA1B,GAAuC;MACvC,MAAM,CAAC,kBAAkB,CAAC,UAA1B,GAAuC;MACvC,OAAO,CAAC,GAAR,CAAY,MAAM,CAAC,kBAAnB;aACA,KAAA,CACE;QAAA,MAAA,EAAQ,MAAR;QACA,GAAA,EAAS,SAAS,CAAC,MAAZ,GAAoB,cAD3B;QAEA,OAAA,EAAS;UACC,cAAA,EAAgB,kBADjB;SAFT;QAKA,IAAA,EAAM,MAAM,CAAC,kBALb;OADF,CAOC,CAAC,IAPF,CAOO,CAAE,SAAC,QAAD;QACP,OAAO,CAAC,GAAR,CAAY,0BAAZ;QACA,OAAO,CAAC,GAAR,CAAY,QAAZ;QACA,MAAM,CAAC,YAAY,CAAC,OAApB,CAA4B,YAA5B,EAA0C,QAAQ,CAAC,IAAI,CAAC,KAAxD;QAEA,MAAM,CAAC,YAAY,CAAC,OAApB,CAA4B,SAA5B,EAAuC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,EAA1D;QACA,QAAQ,CAAC,OAAT,CAAiB,SAAjB;eACA,MAAM,CAAC,EAAP,CAAU,WAAV;MAPO,CAAF,CAPP,EAeG,SAAE,WAAF;QACD,OAAO,CAAC,GAAR,CAAY,sBAAZ;QACA,UAAA,CAAW,CAAE,SAAA;iBACX,MAAM,CAAC,EAAP,CAAU,OAAV;QADW,CAAF,CAAX,EAEG,IAFH;QAGA,OAAO,CAAC,GAAR,CAAY,WAAZ;QACA,OAAO,CAAC,GAAR,CAAY,WAAW,CAAC,IAAI,CAAC,iBAAiB,CAAC,KAAM,CAAA,CAAA,CAAE,CAAC,OAAxD;eAEA,QAAQ,CAAC,KAAT,CAAe,WAAW,CAAC,IAAI,CAAC,iBAAiB,CAAC,KAAM,CAAA,CAAA,CAAE,CAAC,OAA3D;MARC,CAfH;IAJuB;EAH3B,CAPyD;CAA3D","file":"controllers/RegisterController.js","sourceRoot":"/source/","sourcesContent":["'use strict'\r\n\r\nangular.module('subzapp').controller('RegisterController', [\r\n  '$scope'\r\n  '$state'\r\n  '$http'\r\n  '$window'\r\n  'alertify'\r\n  'RESOURCES'\r\n  ( $scope, $state, $http, $window, alertify, RESOURCES ) ->\r\n    console.log 'Register Controller'\r\n\r\n    $scope.register_submit = ->\r\n      $scope.register_form_data.club_admin = true\r\n      $scope.register_form_data.team_admin = true\r\n      console.log $scope.register_form_data\r\n      $http(\r\n        method: 'POST'\r\n        url: \"#{ RESOURCES.DOMAIN }/auth/signup\"\r\n        headers: {\r\n                  'Content-Type': 'application/json'\r\n                  }\r\n        data: $scope.register_form_data\r\n      ).then ( (response) ->\r\n        console.log \"Registration successfull\"\r\n        console.log response\r\n        window.localStorage.setItem 'user_token', response.data.token\r\n        # console.log \"user_token \" + window.localStorage.getItem 'user_token'\r\n        window.localStorage.setItem 'user_id', response.data.user.id\r\n        alertify.success 'Welcome'\r\n        $state.go 'org_admin'\r\n      ), ( errResponse ) ->\r\n        console.log \"Registration failed \"\r\n        setTimeout ( ->\r\n          $state.go 'login' \r\n        ), 5000\r\n        console.log errResponse\r\n        console.log errResponse.data.invalidAttributes.email[0].message        \r\n       \r\n        alertify.error errResponse.data.invalidAttributes.email[0].message\r\n       \r\n        \r\n])"]}