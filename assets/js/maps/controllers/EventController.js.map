{"version":3,"sources":["controllers/EventController.coffee"],"names":[],"mappings":"AAAA;AAEA,OAAO,CAAC,MAAR,CAAe,SAAf,CAAyB,CAAC,UAA1B,CAAqC,iBAArC,EAAwD;EACtD,QADsD,EAEtD,YAFsD,EAGtD,QAHsD,EAItD,OAJsD,EAKtD,cALsD,EAMtD,MANsD,EAOtD,WAPsD,EAQtD,UARsD,EAStD,SAAE,MAAF,EAAU,UAAV,EAAsB,MAAtB,EAA8B,KAA9B,EAAqC,YAArC,EAAmD,IAAnD,EAAyD,SAAzD,EAAoE,QAApE;IACE,OAAO,CAAC,GAAR,CAAY,kBAAZ;IACA,OAAO,CAAC,GAAR,CAAY,YAAY,CAAC,EAAzB;IAEA,MAAM,CAAC,MAAP,GAAgB;IAGhB,IAAI,CAAC,QAAL,CAAA,CAAe,CAAC,IAAhB,CAAqB,CAAE,SAAC,GAAD;MACrB,MAAM,CAAC,IAAP,GAAc,UAAU,CAAC;aACzB,KAAK,CAAC,GAAN,CACE,SAAA,GAAW,YAAY,CAAC,EAD1B,CAEC,CAAC,IAFF,CAEO,CAAE,SAAE,IAAF;QACP,OAAO,CAAC,GAAR,CAAY,WAAZ;QACA,OAAO,CAAC,GAAR,CAAY,IAAZ;QACA,QAAQ,CAAC,OAAT,CAAiB,gBAAjB;eACA,MAAM,CAAC,KAAP,GAAe,IAAI,CAAC;MAJb,CAAF,CAFP,EAOG,SAAE,SAAF;QACD,OAAO,CAAC,GAAR,CAAY,qBAAZ;QACA,OAAO,CAAC,GAAR,CAAY,SAAZ;eACA,QAAQ,CAAC,KAAT,CAAe,oBAAf;MAHC,CAPH;IAFqB,CAAF,CAArB,EAeG,SAAE,WAAF;MACD,OAAO,CAAC,GAAR,CAAY,iBAAA,GAAiB,CAAE,IAAI,CAAC,SAAL,CAAe,WAAf,CAAF,CAA7B;MACA,MAAM,CAAC,IAAP,GAAc;aACd,MAAM,CAAC,EAAP,CAAU,OAAV;IAHC,CAfH;IAoBA,MAAM,CAAC,YAAP,GAAsB,SAAA;MACpB,OAAO,CAAC,GAAR,CAAY,MAAM,CAAC,KAAnB;aAEA,KAAK,CAAC,IAAN,CACE,SAAA,GAAW,YAAY,CAAC,EAD1B,EAEE,MAAM,CAAC,KAFT,CAGC,CAAC,IAHF,CAGO,CAAE,SAAE,GAAF;QACP,OAAO,CAAC,GAAR,CAAY,eAAZ;QACA,OAAO,CAAC,GAAR,CAAY,GAAZ;eACA,QAAQ,CAAC,OAAT,CAAiB,4BAAjB;MAHO,CAAF,CAHP,EAOG,SAAE,WAAF;QACD,OAAO,CAAC,GAAR,CAAY,qBAAZ;QACA,OAAO,CAAC,GAAR,CAAY,WAAZ;eACA,QAAQ,CAAC,KAAT,CAAe,oBAAf;MAHC,CAPH;IAHoB;IAgBtB,MAAM,CAAC,KAAP,GAAe,SAAA;aACb,MAAM,CAAC,KAAK,CAAC,UAAb,GAA8B,IAAA,IAAA,CAAA;IADjB;IAMf,MAAM,CAAC,KAAP,GAAe,SAAA;MACb,MAAM,CAAC,KAAP,GAAe;IADF;IAIf,MAAM,CAAC,KAAP,GAAe,SAAA;MACb,MAAM,CAAC,MAAM,CAAC,MAAd,GAAuB;IADV;IAIf,MAAM,CAAC,KAAP,GAAe,SAAA;MACb,MAAM,CAAC,MAAM,CAAC,MAAd,GAAuB;IADV;IAIf,MAAM,CAAC,OAAP,GAAiB,SAAC,IAAD,EAAO,KAAP,EAAc,GAAd;MACf,MAAM,CAAC,KAAP,GAAmB,IAAA,IAAA,CAAK,IAAL,EAAW,KAAX,EAAkB,GAAlB;IADJ;IAKjB,MAAM,CAAC,MAAP,GAAgB;IAChB,MAAM,CAAC,MAAP,GAAgB;MAAA,MAAA,EAAQ,KAAR;;WAChB,MAAM,CAAC,MAAP,GAAgB;MAAA,MAAA,EAAQ,KAAR;;EApElB,CATsD;CAAxD","file":"controllers/EventController.js","sourceRoot":"/source/","sourcesContent":["'use strict'\n\nangular.module('subzapp').controller('EventController', [\n  '$scope'\n  '$rootScope'\n  '$state'\n  'COMMS'\n  '$stateParams'\n  'user'\n  'RESOURCES'\n  'alertify'\n  ( $scope, $rootScope, $state, COMMS, $stateParams, user, RESOURCES, alertify ) ->\n    console.log 'Event Controller'\n    console.log $stateParams.id\n\n    $scope.format = \"dd-MMMM-yyyy\"\n\n    \n    user.get_user().then ( (res) ->\n      $scope.user = $rootScope.USER\n      COMMS.GET(\n        \"/event/#{ $stateParams.id }\"\n      ).then ( ( resp ) ->\n        console.log \"Got event\"\n        console.log resp\n        alertify.success \"Got event info\"\n        $scope.event = resp.data\n      ), ( event_err ) ->\n        console.log \"Failed to get event\"\n        console.log event_err\n        alertify.error \"Failed to get err \"\n      \n\n    ), ( errResponse ) ->\n      console.log \"User get error #{ JSON.stringify errResponse }\"\n      window.USER = null\n      $state.go 'login'\n\n    $scope.update_event = ->\n      console.log $scope.event\n\n      COMMS.POST(\n        \"/event/#{ $stateParams.id }\"\n        $scope.event\n      ).then ( ( res ) ->\n        console.log \"Event updated\"\n        console.log res\n        alertify.success \"Event updated successfully\"\n      ), ( errResponse ) ->\n        console.log \"Event update error \"\n        console.log errResponse\n        alertify.error \"Event update error\"\n\n    \n    $scope.today = ->\n      $scope.event.start_date = new Date()\n      \n\n    # $scope.today()\n\n    $scope.clear = ->\n      $scope.event = null\n      return\n\n    $scope.open1 = ->\n      $scope.popup1.opened = true\n      return\n\n    $scope.open2 = ->\n      $scope.popup2.opened = true\n      return\n\n    $scope.setDate = (year, month, day) ->\n      $scope.event = new Date(year, month, day)\n      return\n\n    \n    $scope.format = \"dd-MMMM-yyyy\"\n    $scope.popup1 = opened: false\n    $scope.popup2 = opened: false\n    \n\n])\n"]}