<span us-spinner spinner-key="spinner-1"></span>

<div class="container-fluid">
  <img src="images/subzapp_logo.png" class="img-responsive subs_app_logo" alt="Responsive image">
</div>


<div class="row text-center main">
  <h2 >Viewing: {{ org.name }}</h2>
  <h3> {{ team.name }}</h3>
  

  <div class="col-xs-12">
    
    

    <form class="form-horizontal location_form center-block" 
              ng-submit="create_event()" 
              method="post" enctype="application/x-www-form-urlencoded">

      <h2>Create an event</h2>

      <select class="form-group black_text"ng-model="training_or_match">
        <option value="disabled" ng-selected="true">Game or train</option>
        <option value="true">Home Game</option>
        <option value="true">Away Game</option>
        <option value="false">Training</option>
        <option value="false">Other</option>
      </select> <!-- end of form-group -->
      
      <fieldset ng-disabled="training_or_match=='disabled'">
        <div class="form-group">
          <label class="col-sm-2">Name: </label>
          <div class="col-sm-10">
            <input type="text" name="name" ng-model="create_event_data.name" class="form-control" placholder:'name' required>
          </div> <!-- end of col-sm-10 -->
        </div> <!-- end of form-group -->
      </fieldset>

      <fieldset ng-disabled="training_or_match=='disabled'">
        <div class="form-group">
          <label class="col-sm-2">Details: </label>
          <div class="col-sm-10">
            <input type="text" name="name" ng-model="create_event_data.details" class="form-control" placholder:'details' required>
          </div> <!-- end of col-sm-10 -->
        </div> <!-- end of form-group -->
      </fieldset>

       
      <fieldset ng-disabled="training_or_match=='disabled'"> 
        <div class="form-group">
          <label class="col-sm-2">Arrival Time: </label>
          <div class="col-sm-10 black_text">
            <div class="dropdown">
              <a class="dropdown-toggle" id="dropdown1" role="button" data-toggle="dropdown" data-target="#" href="" ng-required="true">
                <div class="input-group"><input type="text" class="form-control" data-ng-model="create_event_data.start_date"><span class="input-group-addon"><i class="glyphicon glyphicon-calendar"></i></span>
                </div>
              </a>
              <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">
                <datetimepicker data-ng-model="create_event_data.start_date" 
                data-on-set-time="onTimeSet(newDate, oldDate)"
                data-datetimepicker-config="{ dropdownSelector: '#dropdown1' }" ng-required="true" />
              </ul>
            </div>
            
          </div> <!-- end of col-sm-10 -->
        </div> <!-- end of form-group -->
      </fieldset>

      <fieldset ng-disabled="training_or_match=='disabled'">
        <div class="form-group" ng-class="{true: 'show_it', false: 'hidden'}[training_or_match]">
          <label class="col-sm-2">Kick off: </label>
          <div class="col-sm-10 black_text">
            <div class="dropdown">
              <a class="dropdown-toggle" id="dropdown2" role="button" data-toggle="dropdown" data-target="#" href="" ng-required="true">
                <div class="input-group"><input type="text" class="form-control" data-ng-model="create_event_data.kick_off_date"><span class="input-group-addon"><i class="glyphicon glyphicon-calendar"></i></span>
                </div>
              </a>
              <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">
                <datetimepicker data-ng-model="create_event_data.kick_off_date" 
                data-on-set-time="onTimeSet(newDate, oldDate)"
                data-datetimepicker-config="{ dropdownSelector: '#dropdown2' }" ng-required="true" />
              </ul>
            </div>
            
          </div> <!-- end of col-sm-10 -->
        </div> <!-- end of form-group -->
      </fieldset>


      <fieldset ng-disabled="training_or_match=='disabled'">
        <div class="form-group">
          <label class="col-sm-2">End Time: </label>
          <div class="col-sm-10 black_text">
            <div class="dropdown">
              <a class="dropdown-toggle" id="dropdown2" role="button" data-toggle="dropdown" data-target="#" href="" ng-required="true">
                <div class="input-group"><input type="text" class="form-control" data-ng-model="create_event_data.end_date"><span class="input-group-addon"><i class="glyphicon glyphicon-calendar"></i></span>
                </div>
              </a>
              <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">
                <datetimepicker data-ng-model="create_event_data.end_date" data-datetimepicker-config="{ dropdownSelector: '#dropdown2' }" ng-required="true"/>
              </ul>
            </div>
            
          </div> <!-- end of col-sm-10 -->
        </div> <!-- end of form-group -->
      </fieldset>

      <fieldset ng-disabled="training_or_match=='disabled'">
        <div class="form-group">
          <label class="col-sm-2">Tokens: </label>
          <div class="col-sm-10">
            <input type="number" name="price" ng-model="create_event_data.price" class="form-control" placholder:'price'>
          </div> <!-- end of col-sm-10 -->
        </div> <!-- end of form-group -->
      </fieldset>

      <fieldset ng-disabled="training_or_match=='disabled'">
        <div class="form-group" >
          <select class="form-control team_location_select" ng-change="new_location()" ng-model="create_event_data.location_id" required>
            <option value="" >---Please select location---</option>
            <option ng-repeat="location in locations" value="{{ location.id }}" 
                    >
              {{ location.location_owner }}, {{ location.location_name }}
            </option>
            <option value="new_location" >---Create new location?---</option>
          </select> <!-- end of form-control -->
        </div> <!-- end of form-group -->
      </fieldset>

      <fieldset ng-disabled="training_or_match=='disabled'">
        <div class="form-group center-block" >
          <button class="btn btn-info" data-toggle="modal" data-target="#add_locations">Add a new location</button>
        </div>
      </fieldset>

      <fieldset ng-disabled="training_or_match=='disabled'">
        <div class="form-group text-center">
          <input type="submit" value="Create event" class="btn btn-default btn btn-success btn-lg register">
          
        </div> <!-- end of form-group text-center -->
      </fieldset>
    </form>
    
  </div> <!-- end of col-xs-12 --> 
</div> <!-- end row text-center main -->

<div class="container-fluid" ng-if="USER.club_admin">
  <div class="form-group text-center">
    
    <button  class="btn btn-warning btn-lg" data-toggle="modal" data-target="#invite_manager">
      Invite manager for this team
    </button>
  </div>
</div> <!-- end of container-fluid -->




<!-- Button trigger modal -->
<div class="container-fluid">
  <button type="button" class="btn btn-primary btn-lg center-block" data-toggle="modal" data-target="#select_player_modal">
    Manage players
  </button>
</div> <!-- end of container-fluid -->
<hr>
<div class="container-fluid">
  <button ui-sref="team_events" class="btn btn-warning btn-lg center-block" >
    Manage Events
  </button>
</div> <!-- end of container-fluid -->


<!-- Modal -->
<div class="modal fade black_text" id="select_player_modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="myModalLabel">Select players for this team</h4>
      </div>
      <div class="modal-body">
        <div class="col-xs-12"> <!-- update date form -->
          <div class="update_date_form">
            <form ng-show="user.club_admin" ng-submit="update_eligible_date()" class="form-horizontal"
                method="post" enctype="application/x-www-form-urlencoded">
                       
                
              <div class="form-group">
                <label class="col-sm-3">Eligible date: </label>    
                <div class="col-sm-9 black_text" ng-show"user.club_admin">
                  <div class="dropdown">
                    <a class="dropdown-toggle" id="dropdown3" role="button" data-toggle="dropdown" data-target="#" href="">
                      <div class="input-group">
                        <input type="text" class="form-control" value="{{ team.eligible_date | date:'MM/dd/yyyy @ h:mma'}}" 
                        data-ng-model="team.eligible_date" required>
                        <span class="input-group-addon"><i class="glyphicon glyphicon-calendar"></i></span>
                      </div>
                    </a>
                    <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">
                      <datetimepicker value="{{ team.eligible_date | date:'MM/dd/yyyy @ h:mma'}}" data-ng-model="team.eligible_date" 
                      data-datetimepicker-config="{ dropdownSelector: '#dropdown3', startView: 'year', minView: 'day' }"
                      required />
                    </ul>
                  </div> <!-- end of dropdown -->
                  
                </div> <!-- end of col-sm-10 -->
              </div> <!-- end of form-group --> 

              <div class="form-group">
                <label class="col-sm-3">Closing date: </label>    
                <div class="col-sm-9 black_text" ng-show"user.club_admin">
                  <div class="dropdown">
                    <a class="dropdown-toggle" id="dropdown4" role="button" data-toggle="dropdown" data-target="#" href="">
                      <div class="input-group">
                        <input type="text" class="form-control" value="{{ team.eligible_date_end | date:'MM/dd/yyyy @ h:mma'}}" 
                        data-ng-model="team.eligible_date_end" >
                        <span class="input-group-addon"><i class="glyphicon glyphicon-calendar"></i></span>
                      </div>
                    </a>
                    <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">
                      <datetimepicker value="{{ team.eligible_date_end | date:'MM/dd/yyyy @ h:mma'}}" data-ng-model="team.eligible_date_end" 
                      data-datetimepicker-config="{ dropdownSelector: '#dropdown4', startView: 'year', minView: 'day' }"
                       />
                    </ul>
                  </div> <!-- end of dropdown -->
                  
                </div> <!-- end of col-sm-10 -->
              </div> <!-- end of form-group -->

              
              
              <input type="submit" value="Update date" class="btn btn-default btn btn-success btn-lg register">
            </form>
          </div> <!-- end of update_date_form -->
        </div> <!-- end of col-xs-12 -->
 
        <div class="col-xs-12"> <!-- update members form -->
          <form ng-submit="update_members()" method="post" enctype="application/x-www-form-urlencoded">
            <div ng-repeat="memb in org_members">
              <label >
                <input type="checkbox" checklist-value="memb.id" checklist-model="team_members_array"> {{ memb.firstName }} {{ memb.lastName }} {{ memb.id }}
              </label>
            </div> <!-- end of ng-repeat="memb in org_members" -->
            <input <input type="submit" value="Update members" class="btn btn-default btn btn-success btn-lg register pull-right">
          </form>
          
        </div> <!-- end of col-xs-12 -->
      </div> <!-- end of modal-body -->
      <div class="modal-footer no_border">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div> <!-- end of modal-footer -->
    </div> <!-- end of modal-content -->
  </div> <!-- end of modal-dialog -->
</div> <!-- end of modal -->




<div ng-include="'/angular_app/views/global_partials/add_locations_part.html'"></div>
<div ng-include="'/angular_app/views/team/invite_manager_part.html'"></div>