// Generated by CoffeeScript 1.10.0
'use strict';
angular.module('subzapp').controller('TeamController', [
  '$scope', '$state', '$http', '$window', '$location', 'user', 'message', 'RESOURCES', function($scope, $state, $http, $window, $location, user, message, RESOURCES) {
    console.log('Team Controller');
    if (!(window.USER != null)) {
      return user.get_user().then((function(res) {
        var find_team;
        console.log("TeamController teams " + (JSON.stringify(window.USER)));
        $scope.user = window.USER;
        $scope.org = window.USER.orgs[0];
        find_team = function(id) {
          var team;
          team = (function() {
            var i, len, ref, results;
            ref = window.USER.teams;
            results = [];
            for (i = 0, len = ref.length; i < len; i++) {
              team = ref[i];
              if (team.id = id) {
                results.push(team);
              }
            }
            return results;
          })();
          console.log("team " + (JSON.stringify($scope.team)));
          return team[0];
        };
        $scope.team = find_team($location.search().id);
        return console.log("f " + (JSON.stringify($scope.team)));
      }), function(errResponse) {
        console.log("User get error " + (JSON.stringify(errResponse)));
        return $state.go('login');
      });
    } else {
      console.log("USER already defined");
      return $scope.org = window.USER.orgs[0];
    }
  }
]);
