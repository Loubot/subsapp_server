// Generated by CoffeeScript 1.10.0
'use strict';
angular.module('subzapp').controller('RegisterController', [
  '$scope', '$state', '$http', '$window', 'RESOURCES', function($scope, $state, $http, $window, RESOURCES) {
    console.log('Register Controller');
    return $scope.register_submit = function() {
      $scope.register_form_data.is_admin = true;
      console.log($scope.register_form_data);
      return $http({
        method: 'POST',
        url: RESOURCES.DOMAIN + "/auth/signup",
        data: $scope.register_form_data
      }).then((function(response) {
        console.log("Registration successfull " + (JSON.stringify(response)));
        return $state.go('user');
      }), function(errResponse) {
        console.log("Registration failed " + (JSON.stringify(errResponse.data.invalidAttributes.email[0].message)));
        $scope.errMessage = errResponse;
        return $('.register_error').show('slide', {
          direction: 'right'
        }, 1000);
      });
    };
  }
]);
